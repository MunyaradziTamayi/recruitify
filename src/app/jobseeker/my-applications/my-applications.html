<div class="my-applications">
    <!-- Top Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container-fluid px-4">
            <a class="navbar-brand fw-bold" routerLink="/employee-dashboard">
                <i class="bi bi-briefcase-fill me-2"></i>Recruitify
            </a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" routerLink="/employee-dashboard" routerLinkActive="active"><i
                                class="bi bi-house-door me-1"></i>Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" routerLink="/browse-jobs" routerLinkActive="active"><i
                                class="bi bi-search me-1"></i>Browse Jobs</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" routerLink="/my-applications" routerLinkActive="active"><i
                                class="bi bi-file-earmark-text me-1"></i>My Applications</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" routerLink="/employee-profile" routerLinkActive="active"><i
                                class="bi bi-person me-1"></i>Profile</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center gap-3">
                    <div class="dropdown">
                        <a class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" href="#"
                            data-bs-toggle="dropdown">
                            <img [src]="user.imageUrl" alt="Profile" class="rounded-circle me-2"
                                style="width: 35px; height: 35px; object-fit: cover;">
                            <span class="d-none d-md-block">{{ user.name }}</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li class="px-3 py-2 text-center border-bottom">
                                <img [src]="user.imageUrl" alt="Profile" class="rounded-circle mb-2"
                                    style="width: 50px; height: 50px; object-fit: cover;">
                                <p class="mb-0 fw-bold small">{{ user.name }}</p>
                                <p class="mb-0 text-muted" style="font-size: 0.75rem;">{{ user.email }}</p>
                            </li>
                            <li><a class="dropdown-item" routerLink="/employee-profile"><i
                                        class="bi bi-person me-2"></i>Profile</a></li>
                            <li><a class="dropdown-item" (click)="logout()" style="cursor: pointer;"><i
                                        class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-wrapper bg-light">
        <div class="container-fluid p-4">
            <div class="header-section mb-4">
                <h2 class="fw-bold">My Applications</h2>
                <p class="text-muted">Track and manage your sent job applications</p>
            </div>

            <!-- Stats Summary -->
            <div class="row g-4 mb-5">
                <div class="col-md-3">
                    <div class="card border-0 shadow-sm p-4 text-center stat-card">
                        <h1 class="fw-bold mb-0">{{ applications.length }}</h1>
                        <p class="text-muted mb-0">Total Applied</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card border-0 shadow-sm p-4 text-center stat-card">
                        <h1 class="fw-bold text-primary mb-0">1</h1>
                        <p class="text-muted mb-0">Active Interviews</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card border-0 shadow-sm p-4 text-center stat-card">
                        <h1 class="fw-bold text-success mb-0">1</h1>
                        <p class="text-muted mb-0">Offers Received</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card border-0 shadow-sm p-4 text-center stat-card">
                        <h1 class="fw-bold text-danger mb-0">1</h1>
                        <p class="text-muted mb-0">Rejected</p>
                    </div>
                </div>
            </div>

            <!-- Application List -->
            <div class="card border-0 shadow-sm overflow-hidden">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="bg-white border-bottom">
                            <tr>
                                <th class="px-4 py-3 border-0">Job Title & Company</th>
                                <th class="py-3 border-0">Applied On</th>
                                <th class="py-3 border-0">Status</th>
                                <th class="py-3 border-0">Type</th>
                                <th class="py-3 border-0 text-end px-4">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let app of applications" class="bg-white">
                                <td class="px-4 py-4">
                                    <div class="d-flex align-items-center gap-3">
                                        <div class="company-logo bg-light rounded d-flex align-items-center justify-content-center p-2"
                                            style="width: 50px; height: 50px; min-width: 50px;">
                                            <img [src]="app.logo" [alt]="app.company" class="img-fluid">
                                        </div>
                                        <div>
                                            <h6 class="mb-1 fw-bold">{{ app.jobTitle }}</h6>
                                            <p class="text-muted small mb-0">{{ app.company }} â€¢ {{ app.location }}</p>
                                        </div>
                                    </div>
                                </td>
                                <td class="text-muted small">{{ app.appliedDate }}</td>
                                <td>
                                    <span class="badge rounded-pill px-3 py-2" [ngClass]="getStatusClass(app.status)">
                                        {{ app.status }}
                                    </span>
                                </td>
                                <td class="text-muted small">{{ app.type }}</td>
                                <td class="text-end px-4">
                                    <button class="btn btn-outline-secondary btn-sm">View Status</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Empty State -->
            <div *ngIf="applications.length === 0" class="text-center py-5 mt-5">
                <div class="mb-4">
                    <i class="bi bi-file-earmark-text text-light" style="font-size: 5rem;"></i>
                </div>
                <h4 class="fw-bold">No applications yet</h4>
                <p class="text-muted">Start applying for jobs to track them here!</p>
                <button class="btn btn-primary mt-3" routerLink="/browse-jobs">Browse Jobs</button>
            </div>
        </div>
    </div>
</div>